{"version":3,"sources":["src\\js\\register\\info\\event.js"],"names":["opts","$form","formValues","Array","from","elements","forEach","item","name","value","onsubmit","e","preventDefault","na","checkResults","length","type","message","alert","data","code","success"],"mappings":";;;;;;AAAA;;AACA;;AACA;;;;kBAEe,UAACA,IAAD,EAAQ;AACnB,QAAMC,QAAM,kBAAE,oBAAF,CAAZ;AACA,QAAIC,aAAW,EAAf;AACAC,UAAMC,IAAN,CAAWH,MAAMI,QAAjB,EAA2BC,OAA3B,CAAmC,UAACC,IAAD,EAAQ;AACvC,YAAGA,KAAKC,IAAR,EAAa;AACTN,uBAAWK,KAAKC,IAAhB,IAAsBD,KAAKE,KAA3B;AACH;AACJ,KAJD;AAKAR,UAAMS,QAAN;AAAA,2EAAe,iBAAMC,CAAN;AAAA;AAAA;AAAA;AAAA;AAAA;AACXA,8BAAEC,cAAF;AACMC,8BAFK,GAEF;AACL,4CAAW,IADN;AAEL,yCAAQ;AAFH,6BAFE;AAMPC,wCANO,GAMM,sBAAMb,KAAN,CANN;;AAAA,iCAQRa,aAAaC,MARL;AAAA;AAAA;AAAA;;AASDP,gCATC,GASIM,aAAa,CAAb,EAAgBN,IATpB;AAUDQ,gCAVC,GAUIF,aAAa,CAAb,EAAgBE,IAVpB;AAWDC,mCAXC,GAWOH,aAAa,CAAb,EAAgBG,OAXvB;;AAYP,gCAAGD,QAAM,WAAT,EAAqB;AACjBE,sCAAML,GAAGL,IAAH,IAASS,OAAf;AACH,6BAFD,MAGI;AACAC,sCAAMD,OAAN;AACH;;AAjBM;AAAA;;AAAA;AAAA;AAAA,mCAqBQ,sBAAU,gBAAV,EAA2Bf,UAA3B,CArBR;;AAAA;AAqBHiB,gCArBG;;AAAA,kCAsBJA,KAAKC,IAAL,IAAW,GAtBP;AAAA;AAAA;AAAA;;AAuBH,gCAAGpB,KAAKqB,OAAR,EAAgB;AACZrB,qCAAKqB,OAAL;AACH;AAzBE;AAAA;;AAAA;AAAA,kCA4BG,OA5BH;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAf;;AAAA;AAAA;AAAA;AAAA;AAgCH,C","file":"event.js","sourceRoot":"D:/account-system-sdk","sourcesContent":["import {fetchPost} from '../../common/fetch.js';\r\nimport {getId as $} from '../../common/utils.js';\r\nimport {check} from '../../common/from-check.js';\r\n\r\nexport default (opts)=>{\r\n    const $form=$('register-info-form');\r\n    let formValues={};\r\n    Array.from($form.elements).forEach((item)=>{\r\n        if(item.name){\r\n            formValues[item.name]=item.value;\r\n        }\r\n    })\r\n    $form.onsubmit=async(e)=>{\r\n        e.preventDefault();\r\n        const na={\r\n            'nickname':'昵称',\r\n            'email':'邮箱'\r\n        }\r\n        let checkResults=check($form);\r\n       \r\n        if(checkResults.length){\r\n            const name=checkResults[0].name;\r\n            const type=checkResults[0].type;\r\n            const message=checkResults[0].message;\r\n            if(type=='  present'){\r\n                alert(na[name]+message);\r\n            }\r\n            else{\r\n                alert(message);\r\n            }\r\n            \r\n        }\r\n        else{\r\n            let data=await fetchPost('/register/info',formValues);\r\n            if(data.code==200){\r\n                if(opts.success){\r\n                    opts.success();\r\n                }\r\n            }\r\n            else{\r\n                throw('error');\r\n            }\r\n        }\r\n    }\r\n}"]}