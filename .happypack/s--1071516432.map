{"version":3,"sources":["src\\js\\common\\from-check.js"],"names":["rules","ltFFFF","value","map","type","message","noOther","match","mobile","email","v","present","trim","check","form","elements","console","log","checkResults","Array","from","filter","item","getAttribute","valids","split","errorArr","forEach","valid","result","push","length","dom","name"],"mappings":";;;;;AAAA;;;;;;AAMA,IAAMA,QAAM;AACRC,YAAO,gBAACC,KAAD,EAAS;AACZ,YAAGA,MAAMC,GAAN,CAAU,oBAAV,CAAH,EAAmC;AAC/B,mBAAO;AACHC,sBAAK,QADF;AAEHC,yBAAQ;AAFL,aAAP;AAIH;AACJ,KARO;AASRC,aAAQ,iBAACJ,KAAD,EAAS;AACb,YAAGA,MAAMK,KAAN,CAAY,UAAZ,CAAH,EAA2B;AACvB,mBAAO;AACHH,sBAAK,SADF;AAEHC,yBAAQ;AAFL,aAAP;AAIH;AACJ,KAhBO;AAiBRG,YAAO,gBAACN,KAAD,EAAS;AACZ;;AAEA,YAAG,CAACA,MAAMK,KAAN,CAAY,WAAZ,CAAJ,EAA6B;AACzB,mBAAO;AACHH,sBAAK,SADF;AAEHC,yBAAQ;AAFL,aAAP;AAIH;AACJ,KA1BO;AA2BRI,WAAO,eAACC,CAAD,EAAO;AACV,YAAI,CAACA,EAAEH,KAAF,CAAQ,iEAAR,CAAL,EAAiF;AAC7E,mBAAO;AACHH,sBAAM,OADH;AAEHC,yBAAS;AAFN,aAAP;AAIH;AACJ,KAlCO;AAmCRM,aAAQ,iBAACT,KAAD,EAAS;AACb;AACA,YAAG,CAACA,MAAMU,IAAN,EAAJ,EAAiB;;AAEb,mBAAO;AACHR,sBAAK,SADF;AAEHC,yBAAQ;AAFL,aAAP;AAIH;AACD;AACH;AA7CO,CAAZ;AA+CA,IAAMQ,QAAM,SAANA,KAAM,CAACC,IAAD,EAAQ;AAChB;AACA;AACA,QAAG,EAAEA,QAAMA,KAAKC,QAAb,CAAH,EAA0B;AACtBC,gBAAQC,GAAR,CAAY,UAAZ;AACA;AACH;AACD,QAAMF,WAASD,KAAKC,QAApB;AACA,QAAIG,eAAa,EAAjB;;AAEA;AACAC,UAAMC,IAAN,CAAWL,QAAX,EAAqBM,MAArB,CAA4B,gBAAM;AAC9B,eAAOC,KAAKC,YAAL,CAAkB,OAAlB,CAAP;AACH,KAFD,EAEGpB,GAFH,CAEO,gBAAM;AACT,YAAMqB,SAAOF,KAAKC,YAAL,CAAkB,OAAlB,EAA2BE,KAA3B,CAAiC,IAAjC,CAAb;AACA,YAAMvB,QAAMoB,KAAKpB,KAAjB;AACA,YAAIwB,WAAS,EAAb;AACAF,eAAOG,OAAP,CAAe,iBAAO;AAClB,gBAAG3B,MAAM4B,KAAN,CAAH,EAAgB;AACZ,oBAAIC,SAAO7B,MAAM4B,KAAN,EAAa1B,KAAb,CAAX;AACA,oBAAG2B,MAAH,EAAU;AACNH,6BAASI,IAAT,CAAcD,MAAd;AACH;AACJ;AACJ,SAPD;AAQA,YAAGH,SAASK,MAAZ,EAAmB;AACfb,yBAAaY,IAAb,CAAkB;AACdE,qBAAIV,IADU;AAEdI,0BAASA,QAFK;AAGdO,sBAAKX,KAAKW,IAHI;AAId5B,yBAAQqB,SAAS,CAAT,EAAYrB,OAJN;AAKdD,sBAAKsB,SAAS,CAAT,EAAYtB;AALH,aAAlB;AAOH;AACJ,KAvBD;AAwBA,WAAOc,YAAP;AACH,CApCD;QAqCQL,K,GAAAA,K","file":"from-check.js","sourceRoot":"D:/account-system-sdk","sourcesContent":["/*\r\n * @Author: mikey.zhaopeng \r\n * @Date: 2018-02-16 02:48:17 \r\n * @Last Modified by: mikey.zhaopeng\r\n * @Last Modified time: 2018-02-23 01:38:41\r\n */\r\nconst rules={\r\n    ltFFFF:(value)=>{\r\n        if(value.map(/\\u{ffff}-\\u{fffff}/)){\r\n            return {\r\n                type:'ltFFFF',\r\n                message:'您输入了非法字符'\r\n            }\r\n        }\r\n    },\r\n    noOther:(value)=>{\r\n        if(value.match(/[\\p{C}]/u)){\r\n            return {\r\n                type:'noOther',\r\n                message:'您输入了非法字符'\r\n            }\r\n        }\r\n    },\r\n    mobile:(value)=>{\r\n        // console.log(\"!!\");\r\n       \r\n        if(!value.match(/^1\\d{10}$/)){\r\n            return {\r\n                type:'present',\r\n                message:'手机号格式不对!'\r\n            }\r\n        }\r\n    },\r\n    email: (v) => {\r\n        if (!v.match(/^([a-zA-Z0-9_\\.\\-])+\\@(([a-zA-Z0-9\\-])+\\.)+([a-zA-Z0-9]{2,4})+$/)) {\r\n            return {\r\n                type: 'email',\r\n                message: '请填入正确的邮箱'\r\n            }\r\n        }\r\n    },\r\n    present:(value)=>{\r\n        // trim移除字符串中多余符号\r\n        if(!value.trim()){\r\n            \r\n            return {\r\n                type:'present',\r\n                message:'必填'\r\n            }\r\n        }\r\n        return\r\n    },\r\n}\r\nconst check=(form)=>{\r\n    // console.log(\"form\"+form);\r\n    // console.log(\"elements\"+form.elements);\r\n    if(!(form||form.elements)){\r\n        console.log(\"form不存在!\");\r\n        return;\r\n    }\r\n    const elements=form.elements;\r\n    let checkResults=[];\r\n    \r\n    //类数组转化为数组并筛选\r\n    Array.from(elements).filter(item=>{\r\n        return item.getAttribute('valid');\r\n    }).map(item=>{\r\n        const valids=item.getAttribute('valid').split(\", \");\r\n        const value=item.value;\r\n        let errorArr=[];\r\n        valids.forEach(valid=>{\r\n            if(rules[valid]){\r\n                let result=rules[valid](value);\r\n                if(result){\r\n                    errorArr.push(result);\r\n                }\r\n            }\r\n        });\r\n        if(errorArr.length){\r\n            checkResults.push({\r\n                dom:item,\r\n                errorArr:errorArr,\r\n                name:item.name,\r\n                message:errorArr[0].message,\r\n                type:errorArr[0].type,\r\n            });\r\n        }\r\n    })\r\n    return checkResults;\r\n}\r\nexport {check}"]}