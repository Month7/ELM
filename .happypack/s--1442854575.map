{"version":3,"sources":["src\\js\\delivery-address\\render.js"],"names":["regionData","tpl","opts","data","currentData","addrId","find","item","parseInt","regionCode","split","map","detailAddress","postalcode","name","mobile","telephone","forEach","regionSting","result","code","container","innerHTML","region","preset","initData","alert"],"mappings":";;;;;;AAAA;;AACA;;AACA;;;;AACA;;;;;;;;AAEA,IAAIA,mBAAJ;;AAEA,IAAMC,MAAI,eAAW;AAAA,QAAVC,IAAU,uEAAL,EAAK;;AACjB,QAAMC,OAAKD,KAAKC,IAAhB;AACA,QAAIC,oBAAJ;AACA,QAAGF,KAAKG,MAAR,EAAe;AACXD,sBAAYD,KAAKG,IAAL,CAAU,UAACC,IAAD,EAAQ;AAC1B,mBAAOC,SAASN,KAAKG,MAAd,MAAwBE,KAAKF,MAApC;AACH,SAFW,CAAZ;AAGAL,qBAAYI,YAAYK,UAAb,GAA0BL,YAAYK,UAAZ,CAAuBC,KAAvB,CAA6B,GAA7B,EAAkCC,GAAlC,CAAsC,UAACJ,IAAD,EAAQ;AAC/E,mBAAOC,SAASD,IAAT,CAAP;AACH,SAFoC,CAA1B,GAEN,EAFL;AAGH,KAPD,MAQI;AACAH,sBAAY,EAAZ;AACH;AACD,QAAIH,0OAGyEG,YAAYC,MAAZ,IAAsB,EAH/F,mZAU6HD,YAAYQ,aAAZ,IAA6B,EAV1J,8PAcqGR,YAAYS,UAAZ,IAA0B,EAd/H,oPAkB8FT,YAAYU,IAAZ,IAAoB,EAlBlH,kQAsBkGV,YAAYW,MAAZ,IAAsB,EAtBxH,8QA0BsGX,YAAYY,SAAZ,IAAyB,EA1B/H,k7BAAJ;AA0DAb,SAAKc,OAAL,CAAa,UAACV,IAAD,EAAQ;AACjBN,sEAGWM,KAAKO,IAHhB,+DAMWP,KAAKW,WANhB,+DASWX,KAAKK,aAThB,+DAYWL,KAAKM,UAZhB,gEAeWN,KAAKQ,MAAL,IAAeR,KAAKS,SAf/B,oIAkB8ET,KAAKF,MAlBnF,mEAkB6IE,KAAKF,MAlBlJ;AAqBH,KAtBD;AAuBAJ;AAKA,WAAOA,GAAP;AACH,CArGD;;;uEAsGe,iBAAMC,IAAN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,+BACQ,sBAAU,mBAAV,EAA8B,EAA9B,CADR;;AAAA;AACLiB,8BADK;;AAEX,4BAAGA,OAAOC,IAAP,IAAa,GAAhB,EAAoB;AAChBlB,iCAAKmB,SAAL,CAAeC,SAAf,GAAyBrB,IAAI;AACzBE,sCAAKgB,OAAOhB,IADa;AAEzBE,wCAAOH,KAAKG,MAAL,IAAa,yBAAa,QAAb;AAFK,6BAAJ,CAAzB;AAIMkB,kCALU,GAKH,qBAAW;AACpBF,2CAAU,kBAAE,yBAAF,CADU;AAEpBP,sCAAK,QAFe;AAGpBU,wCAAO,IAHa;AAIpBC,0CAASzB;AAJW,6BAAX,CALG;AAWnB,yBAXD,MAYI;AACA0B,kCAAM,KAAN;AACH;;AAhBU;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,K","file":"render.js","sourceRoot":"D:/account-system-sdk","sourcesContent":["import { fetchJson } from '../common/fetch';\r\nimport {getUrlParams,getId as $} from '../common/utils';\r\nimport Region from '../common/region';\r\nimport bindEvent from './event';\r\n\r\nlet regionData;\r\n\r\nconst tpl=(opts={})=>{\r\n    const data=opts.data;\r\n    let currentData;\r\n    if(opts.addrId){\r\n        currentData=data.find((item)=>{\r\n            return parseInt(opts.addrId)===item.addrId;\r\n        })\r\n        regionData=(currentData.regionCode)?(currentData.regionCode.split(\",\").map((item)=>{\r\n            return parseInt(item)\r\n        })):('');\r\n    }\r\n    else{\r\n        currentData={};\r\n    }\r\n    let tpl =  `\r\n    <div id=\"delivery-address-wrapper\" class=\"delivery-address-wrapper\">\r\n        <form id=\"delivery-address-form\" onsubmit=\"return false\">\r\n            <input id=\"delivery-address-id\" name=\"addrId\" type=\"hidden\" value=\"${currentData.addrId || ''}\">\r\n            <label>\r\n                <span>省市区：</span>\r\n                <div id=\"delivery-address-region\"></div>\r\n            </label>\r\n            <label>\r\n                <span>详细地址：</span>\r\n                <textarea id=\"delivery-address-detail\" name=\"detailAddress\"  placeholder=\"详细地址\" valid=\"present\" rows=\"3\" cols=\"20\">${currentData.detailAddress || ''}</textarea>\r\n            </label>\r\n            <label>\r\n                <span>邮政编码：</span>\r\n                <input id=\"delivery-address-email\" name=\"postalcode\" type=\"text\" placeholder=\"邮政编码\" value=\"${currentData.postalcode || ''}\">\r\n            </label>\r\n            <label>\r\n                <span>收货人姓名：</span>\r\n                <input id=\"delivery-address-name\" name=\"name\" type=\"text\" placeholder=\"真实姓名\" value=\"${currentData.name || ''}\" valid=\"present\">\r\n            </label>\r\n            <label>\r\n                <span>手机号码：</span>\r\n                <input id=\"delivery-address-mobile\" name=\"mobile\" type=\"text\" placeholder=\"手机号码\" value=\"${currentData.mobile || ''}\" valid=\"present, mobile\">\r\n            </label>\r\n            <label>\r\n                <span>固定电话：</span>\r\n                <input id=\"delivery-address-telphone\" name=\"telphone\" type=\"text\" placeholder=\"固话号码\" value=\"${currentData.telephone || ''}\">\r\n            </label>\r\n            <label>\r\n                <span>&nbsp;</span>\r\n                <input id=\"save-delivery-address\" type=\"submit\" value=\"保存\">\r\n            </label>\r\n\r\n        </form>\r\n\r\n        <div class=\"delivery-address-list\" id=\"delivery-address-list\">\r\n            <table>\r\n                <tr>\r\n                    <th>\r\n                        收货人\r\n                    </th>\r\n                    <th>\r\n                        所在地区\r\n                    </th>\r\n                    <th>\r\n                        详细地址\r\n                    </th>\r\n                    <th>\r\n                        邮编\r\n                    </th>\r\n                    <th>\r\n                        手机/固话\r\n                    </th>\r\n                    <th>\r\n                        操作\r\n                    </th>\r\n                <tr>\r\n`\r\n    data.forEach((item)=>{\r\n        tpl += `\r\n        <tr>\r\n            <td>\r\n                ${ item.name }\r\n            </td>\r\n            <td>\r\n                ${ item.regionSting }\r\n            </td>\r\n            <td>\r\n                ${ item.detailAddress }\r\n            </td>\r\n            <td>\r\n                ${ item.postalcode }\r\n            </td>\r\n            <td>\r\n                ${ item.mobile || item.telephone }\r\n            </td>\r\n            <td>\r\n                <a href=\"javascript:void(0);\" class=\"del-delivery-address\" data-id=\"${item.addrId}\">删除</a> | <a href=\"delivery-address.html?addrId=${item.addrId}\">修改</a>\r\n            </td>\r\n        <tr>`\r\n    })\r\n    tpl+=`\r\n        </table>\r\n        </div>\r\n        </div>\r\n    `\r\n    return tpl;\r\n}\r\nexport default async(opts)=>{\r\n    const result=await fetchJson('/delivery-address',{});\r\n    if(result.code==200){\r\n        opts.container.innerHTML=tpl({\r\n            data:result.data,\r\n            addrId:opts.addrId||getUrlParams('addrId'),\r\n        });\r\n        const region=new Region({\r\n            container:$('delivery-address-region'),\r\n            name:'region',\r\n            preset:true,\r\n            initData:regionData\r\n        });\r\n    }\r\n    else{\r\n        alert(\"失败！\");\r\n    }\r\n}"]}