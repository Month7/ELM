{"version":3,"sources":["src\\js\\delivery-address\\event.js"],"names":["opts","$saveBtn","$list","$form","tipMap","onsubmit","e","preventDefault","checkResult","length","formValues","Array","from","elements","forEach","item","name","value","data","code","success","alert","type","confirm","addrId","target","getAttribute","location","reload"],"mappings":";;;;;;AAAA;;AACA;;AACA;;;;kBAEe,UAACA,IAAD,EAAQ;AACnB,QAAMC,WAAW,kBAAE,uBAAF,CAAjB;AACA,QAAMC,QAAQ,kBAAE,uBAAF,CAAd;AACA,QAAMC,QAAQ,kBAAE,uBAAF,CAAd;AACA,QAAMC,SAAS;AACX,gBAAQ,OADG;AAEX,kBAAU,OAFC;AAGX,yBAAiB,MAHN;AAIX,kBAAU;AAEd;;;AANe,KAAf,CASAD,MAAME,QAAN;AAAA,2EAAe,iBAAMC,CAAN;AAAA;AAAA;AAAA;AAAA;AAAA;AACXA,8BAAEC,cAAF;AACMC,uCAFK,GAEO,sBAAML,KAAN,CAFP;;AAAA,gCAGPK,YAAYC,MAHL;AAAA;AAAA;AAAA;;AAIHC,sCAJG,GAIU,EAJV;;AAKPC,kCAAMC,IAAN,CAAWT,MAAMU,QAAjB,EAA2BC,OAA3B,CAAmC,UAACC,IAAD,EAAQ;AACvC,oCAAGA,KAAKC,IAAR,EAAa;AACTN,+CAAWK,KAAKC,IAAhB,IAAsBD,KAAKE,KAA3B;AACH;AACJ,6BAJD;AALO;AAAA,mCAUQ,sBAAU,gBAAV,EAA2BP,UAA3B,CAVR;;AAAA;AAUHQ,gCAVG;;AAWP,gCAAGA,KAAKC,IAAL,IAAW,GAAd,EAAkB;AACdnB,qCAAKoB,OAAL,IAAcpB,KAAKoB,OAAL,EAAd;AACH,6BAFD,MAGI;AACAC,sCAAM,MAAN;AACH;AAhBM;AAAA;;AAAA;AAoBDC,gCApBC,GAoBId,YAAY,CAAZ,EAAec,IApBnB;AAqBDN,gCArBC,GAqBIR,YAAY,CAAZ,EAAeQ,IArBnB;;AAsBP,gCAAGM,QAAM,SAAT,EAAmB;AACfD,sCAAM,OAAN;AACH,6BAFD,MAGI;AACAA,sCAAM,aAAWjB,OAAOY,IAAP,CAAjB;AACH;;AA3BM;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAf;;AAAA;AAAA;AAAA;AAAA;AA8BA;;;AAGA,0BAAUd,KAAV,EAAgB,OAAhB,EAAwB,uBAAxB;AAAA,4EAAgD,kBAAMI,CAAN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iCACzCiB,QAAQ,cAAR,CADyC;AAAA;AAAA;AAAA;;AAAA;AAAA,mCAEzB,sBAAU,eAAV,EAA0B;AACrCC,wCAAOlB,EAAEmB,MAAF,CAASC,YAAT,CAAsB,SAAtB;AAD8B,6BAA1B,CAFyB;;AAAA;AAEpCR,gCAFoC;;AAKxC,gCAAGA,KAAKC,IAAL,IAAW,GAAd,EAAkB;AACdQ,yCAASC,MAAT;AACH,6BAFD,MAGI;AACAP,sCAAM,MAAN;AACH;;AAVuC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAhD;;AAAA;AAAA;AAAA;AAAA;AAaH,C","file":"event.js","sourceRoot":"D:/account-system-sdk","sourcesContent":["import {fetchPost} from '../common/fetch.js';\r\nimport {getId as $, bindEvent} from '../common/utils.js';\r\nimport {check} from '../common/from-check.js';\r\n\r\nexport default (opts)=>{\r\n    const $saveBtn = $('save-delivery-address');\r\n    const $list = $('delivery-address-list');\r\n    const $form = $('delivery-address-form');\r\n    const tipMap = {\r\n        'name': '收货人姓名',\r\n        'region': '所在地信息',\r\n        'detailAddress': '详细地址',\r\n        'mobile': '手机号码'\r\n    }\r\n    /**\r\n     * 保存收货地址\r\n     */\r\n    $form.onsubmit=async(e)=>{\r\n        e.preventDefault();\r\n        const checkResult=check($form);\r\n        if(!checkResult.length){\r\n            let formValues = {};\r\n            Array.from($form.elements).forEach((item)=>{\r\n                if(item.name){\r\n                    formValues[item.name]=item.value;\r\n                }\r\n            })\r\n            let data=await fetchPost('/save-delivery',formValues);\r\n            if(data.code==200){\r\n                opts.success&&opts.success();\r\n            }\r\n            else{\r\n                alert(\"保存失败\");\r\n            }\r\n        }\r\n        else{\r\n            \r\n            const type=checkResult[0].type;\r\n            const name=checkResult[0].name;\r\n            if(type=='present'){\r\n                alert(\"不能为空！\");\r\n            }\r\n            else{\r\n                alert(\"请填写格式正确的\"+tipMap[name]);\r\n            }\r\n        }\r\n    }\r\n    /**\r\n     * 删除收获地址\r\n     */\r\n    bindEvent($list,'click','.del-delivery-address',async(e)=>{\r\n        if(confirm(\"是否确定删除该收货地址？\")){\r\n            let data=await fetchPost('/del-delivery',{\r\n                addrId:e.target.getAttribute('data-id')\r\n            })\r\n            if(data.code==200){\r\n                location.reload();\r\n            }\r\n            else{\r\n                alert(\"删除失败\");\r\n            }\r\n        }\r\n    })\r\n}"]}