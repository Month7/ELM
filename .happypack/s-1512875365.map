{"version":3,"sources":["src\\js\\common\\slider.js"],"names":["render","Symbol","event","style","Slider","opts","container","console","log","unsuccessTip","tpl","innerHTML","$btn","$moved","$wrapper","$text","reset","startX","startY","start","end","left","width","offsetArr","onmousedown","e","pageX","pageY","window","onmousemove","offsetX","offsetY","push","r2","parseInt","getComputedStyle","r1","offsetLeft","success","onmouseup"],"mappings":"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","file":"slider.js","sourceRoot":"D:/account-system-sdk","sourcesContent":["import {getId as $} from '../common/utils.js';\r\n\r\nconst render=Symbol('render');\r\nconst event=Symbol('event');\r\nconst style =\r\n`<style>\r\n    .vs-wrapper {\r\n        position: relative;\r\n        width: 100%;\r\n        height: 100%;\r\n    }\r\n\r\n    .vs-moved-bg {\r\n        background: green;\r\n        width: 0;\r\n        position: absolute;\r\n        z-index: 999;\r\n        height: 100%;\r\n    }\r\n\r\n    .vs-unmoved-bg {\r\n        background: gray;\r\n        width: 100%;\r\n        position:absolute\r\n        z-index: 998;\r\n        height: 100%;\r\n    }\r\n\r\n    .vs-text {\r\n        position: absolute;\r\n        width: 100%;\r\n        top: 0;\r\n        z-index: 1000;\r\n        backgound: rgba(0,0,0,0);\r\n        text-align: center;\r\n    }\r\n\r\n    .vs-move-btn {\r\n        height: 100%;\r\n        width: 30px;\r\n        background: #333333;\r\n        position: absolute;\r\n        top: 0;\r\n        left: 0;\r\n        z-index: 1001;\r\n    }\r\n</style>`\r\nclass Slider{\r\n    constructor(opts){\r\n        this.opts=opts;\r\n        if(!opts.container){\r\n            console.log(\"opts.container错误\");\r\n        }\r\n        else{\r\n            this[render](opts);\r\n            this[event](opts);\r\n        }\r\n    }\r\n    [render](opts){\r\n        const unsuccessTip=opts.unsuccessTip||\"请拖动滑块到最右边\";\r\n        const tpl=style+`\r\n            <div id=\"vs-wrapper\" class=\"vs-wrapper\">\r\n                <div id=\"vs-moved-bg\" class=\"vs-moved-bg\"></div>\r\n                <span id=\"vs-move-btn\" class=\"vs-move-btn\"></span>\r\n                <div id=\"vs-unmoved-bg\" class=\"vs-unmoved-bg\"></div>\r\n                <span id=\"vs-text\" class=\"vs-text\" ondrag=\"return false;\">\r\n                    ${unsuccessTip}\r\n                </span>\r\n            </div>\r\n        `\r\n \r\n        opts.container.innerHTML=tpl;\r\n    }\r\n    [event](opts){\r\n        const $btn=$('vs-move-btn');\r\n        const $moved=$('vs-moved-bg');\r\n        const $wrapper=$('vs-wrapper');\r\n        const $text=$('vs-text');\r\n        const reset=()=>{\r\n            this.startX=0;\r\n            this.startY=0;\r\n            this.start=false;\r\n            this.end=false;\r\n            $btn.style.left='0px';\r\n            $moved.style.width='0px';\r\n            this.offsetArr=[];\r\n        }\r\n        $btn.onmousedown=(e)=>{\r\n            this.start=true;\r\n            this.startX=e.pageX;\r\n            this.startY=e.pageY;\r\n            this.offsetArr=[];\r\n        };\r\n        window.onmousemove=(e)=>{\r\n            if(this.start&&!this.end){\r\n                let offsetX=e.pageX-this.startX;\r\n                let offsetY=e.pageY-this.startY;\r\n                this.offsetArr.push(offsetX+\",\"+offsetY);\r\n                $btn.style.left=offsetX+'px';\r\n                $moved.style.width=offsetX+'px';\r\n                let r2=parseInt(window.getComputedStyle($wrapper).width)-parseInt(window.getComputedStyle($btn).width);\r\n                let r1=$moved.offsetLeft+parseInt(window.getComputedStyle($moved).width);\r\n                if(r1>=r2){\r\n                    this.end=true;\r\n                    this.start=false;\r\n                    $btn.style.left=r2+'px';\r\n                    $moved.style.width=r2+'px';\r\n                    if(opts.success){\r\n                        opts.success($wrapper,$text,this.offsetArr);\r\n                    }\r\n                }\r\n            }\r\n        };\r\n        window.onmouseup=()=>{\r\n            if(!this.end){ \r\n                reset();\r\n            }\r\n        }\r\n    }\r\n    reset(){\r\n        this[render](this.opts);\r\n        this[event](this.opts);\r\n    }\r\n}\r\nexport default Slider;"]}